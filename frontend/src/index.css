/* Import mobile enhancements */
@import "./styles/mobile-enhancements.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  html,
  body {
    @apply bg-gradient-to-br from-primary-900 via-secondary-500 to-secondary-600;
    min-height: 100vh;
    height: 100vh;
    overflow: hidden;
  }

  /* Landing page specific styles */
  .landing-page {
    height: 100vh !important;
    overflow-y: auto !important;
    scroll-behavior: smooth;
    scroll-snap-type: y proximity;
    -webkit-overflow-scrolling: touch;
  }

  .landing-page section {
    scroll-snap-align: start;
    scroll-snap-stop: always;
  }

  /* Mobile responsive adjustments */
  @media (max-width: 640px) {
    .landing-page {
      height: 100vh;
      height: 100dvh; /* Dynamic viewport height for mobile */
    }

    .landing-page section {
      min-height: 100vh;
      min-height: 100dvh;
      padding: 1rem;
    }
  }

  /* Tablet responsive adjustments */
  @media (min-width: 641px) and (max-width: 1024px) {
    .landing-page section {
      padding: 2rem;
    }
  }

  /* Desktop responsive adjustments */
  @media (min-width: 1025px) {
    .landing-page section {
      padding: 2rem 4rem;
    }
  }

  /* Smooth scrolling enhancement */
  @media (prefers-reduced-motion: no-preference) {
    .landing-page {
      scroll-behavior: smooth;
    }
  }

  #root {
    height: 100vh;
    overflow: hidden;
  }

  /* Landing page root override */
  #root:has(.landing-page) {
    height: auto !important;
    overflow-y: auto !important;
  }

  /* Mobile specific fixes */
  @media (max-width: 640px) {
    html,
    body,
    #root {
      height: 100vh;
      height: 100dvh; /* Dynamic viewport height for mobile */
      overflow: hidden;
    }
  }

  /* Safe area insets for mobile devices */
  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Custom Scrollbar Styles */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
    transition: background-color 0.2s ease;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.3);
  }

  /* Enhanced smooth scrolling for better performance */
  .webkit-scrolling-touch {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    will-change: scroll-position;
    transform: translateZ(0); /* Force hardware acceleration */
  }

  /* Ultra smooth scrolling class */
  .ultra-smooth-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    will-change: scroll-position;
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000;
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    -webkit-perspective: 1000;
  }

  /* Optimize scroll performance */
  .scroll-optimized {
    contain: layout style paint;
    content-visibility: auto;
    contain-intrinsic-size: auto 500px;
  }

  /* Chat animations */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes typing {
    0%,
    60%,
    100% {
      transform: translateY(0);
    }
    30% {
      transform: translateY(-10px);
    }
  }

  /* Mobile optimizations */
  @media (max-width: 640px) {
    .mobile-chat-message {
      max-width: 85%;
    }

    .mobile-input-area {
      padding: 0.75rem;
    }

    .mobile-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .mobile-avatar > div {
      border-radius: 50%;
    }

    /* Touch-friendly button sizes */
    .mobile-touch-target {
      min-height: 44px;
      min-width: 44px;
    }

    /* Improved text readability on small screens */
    .mobile-text-base {
      font-size: 0.875rem;
      line-height: 1.375;
    }

    .mobile-text-sm {
      font-size: 0.75rem;
      line-height: 1.25;
    }
  }

  /* Tablet optimizations */
  @media (min-width: 641px) and (max-width: 1024px) {
    .tablet-layout {
      padding: 1rem;
    }

    .tablet-sidebar {
      width: 280px;
    }

    .tablet-content {
      margin-left: 280px;
    }
  }

  /* Desktop optimizations */
  @media (min-width: 1025px) {
    .desktop-layout {
      padding: 1.5rem;
    }

    .desktop-sidebar {
      width: 320px;
    }

    .desktop-content {
      margin-left: 320px;
    }
  }

  /* High DPI optimizations */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .high-dpi-optimized {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
  }
}

@layer components {
  .btn-primary {
    @apply bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl;
  }

  .btn-secondary {
    @apply bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 border border-white/20;
  }

  .input-field {
    @apply w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200;
  }

  .card {
    @apply bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-6 shadow-xl;
  }

  /* Enhanced Markdown Styles */
  .markdown-content {
    @apply text-gray-100;
  }

  .markdown-content h1 {
    @apply text-xl lg:text-2xl font-bold text-white mb-4 mt-6;
  }

  .markdown-content h2 {
    @apply text-lg lg:text-xl font-semibold mb-3 mt-5;
    background: linear-gradient(135deg, #00f5ff, #9d4edd);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .markdown-content h3 {
    @apply text-base lg:text-lg font-semibold mb-2 mt-4;
    color: #9d4edd;
  }

  .markdown-content ul {
    @apply space-y-2 mb-4;
  }

  .markdown-content ol {
    @apply space-y-2 mb-4;
  }

  .markdown-content li {
    @apply text-gray-100 leading-relaxed;
  }

  /* Code block enhancements */
  .code-block-container {
    @apply relative rounded-lg overflow-hidden border border-white/10 shadow-lg;
    background: linear-gradient(
      135deg,
      rgba(17, 24, 39, 0.9),
      rgba(31, 41, 55, 0.9)
    );
  }

  .code-language-label {
    @apply absolute top-0 left-4 -translate-y-1/2 z-10 px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide text-white;
    background: linear-gradient(135deg, #00f5ff, #9d4edd);
  }

  .copy-button {
    @apply absolute top-3 right-3 flex items-center space-x-1 px-3 py-1.5 text-xs text-white border rounded-md opacity-0 transition-all duration-300 backdrop-blur-sm;
    background: linear-gradient(
      135deg,
      rgba(0, 245, 255, 0.1),
      rgba(157, 78, 221, 0.1)
    );
    border-color: rgba(0, 245, 255, 0.3);
  }

  .copy-button:hover {
    background: linear-gradient(
      135deg,
      rgba(0, 245, 255, 0.2),
      rgba(157, 78, 221, 0.2)
    );
    border-color: rgba(0, 245, 255, 0.5);
  }

  .group:hover .copy-button {
    @apply opacity-100;
  }

  /* Premium Chat Input Enhancements */
  .shadow-3xl {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25),
      0 10px 20px -5px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.05);
  }

  .glass-input {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1),
      rgba(255, 255, 255, 0.05)
    );
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.1);
  }

  .glass-button {
    background: linear-gradient(
      135deg,
      rgba(94, 115, 255, 0.9),
      rgba(76, 86, 247, 0.9)
    );
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow: 0 8px 32px rgba(94, 115, 255, 0.3),
      0 4px 16px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }

  /* Animations */
  @keyframes glow {
    0%,
    100% {
      box-shadow: 0 0 20px rgba(94, 115, 255, 0.3);
    }
    50% {
      box-shadow: 0 0 30px rgba(94, 115, 255, 0.5);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-glow {
    animation: glow 2s ease-in-out infinite;
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }
}
